<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Deploy | UAP Site</title>
    <meta name="description" content="UAP usage help document">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" href="/uapsite/logo.png">
  <link rel="manifest" href="/uapsite/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/uapsite/icons/hxlogo.ico">
  <link rel="mask-icon" href="/uapsite/icons/hxlogo.ico" color="#3eaf7c">
  <meta name="msapplication-TileImage" content="/icons/hxlogo.ico">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/uapsite/assets/css/0.styles.69760bb8.css" as="style"><link rel="preload" href="/uapsite/assets/js/app.58d761a1.js" as="script"><link rel="preload" href="/uapsite/assets/js/4.80270faa.js" as="script"><link rel="preload" href="/uapsite/assets/js/12.eabeb8a0.js" as="script"><link rel="preload" href="/uapsite/assets/js/5.7f8a8258.js" as="script"><link rel="prefetch" href="/uapsite/assets/js/10.6a788c12.js"><link rel="prefetch" href="/uapsite/assets/js/11.fa5e3344.js"><link rel="prefetch" href="/uapsite/assets/js/13.6e9f6e22.js"><link rel="prefetch" href="/uapsite/assets/js/14.d254745e.js"><link rel="prefetch" href="/uapsite/assets/js/15.380cc16d.js"><link rel="prefetch" href="/uapsite/assets/js/16.0898b18c.js"><link rel="prefetch" href="/uapsite/assets/js/17.7abca04f.js"><link rel="prefetch" href="/uapsite/assets/js/18.d40fb34f.js"><link rel="prefetch" href="/uapsite/assets/js/19.6fa2038c.js"><link rel="prefetch" href="/uapsite/assets/js/20.0dc1465c.js"><link rel="prefetch" href="/uapsite/assets/js/21.6c3dc622.js"><link rel="prefetch" href="/uapsite/assets/js/22.f85fa17e.js"><link rel="prefetch" href="/uapsite/assets/js/23.574520e7.js"><link rel="prefetch" href="/uapsite/assets/js/24.3799201a.js"><link rel="prefetch" href="/uapsite/assets/js/25.34f67389.js"><link rel="prefetch" href="/uapsite/assets/js/26.ebb64201.js"><link rel="prefetch" href="/uapsite/assets/js/27.7e9b9d8f.js"><link rel="prefetch" href="/uapsite/assets/js/28.b1ed27ee.js"><link rel="prefetch" href="/uapsite/assets/js/29.1fe1186c.js"><link rel="prefetch" href="/uapsite/assets/js/30.4f8930f9.js"><link rel="prefetch" href="/uapsite/assets/js/31.d76d9926.js"><link rel="prefetch" href="/uapsite/assets/js/32.47aee94e.js"><link rel="prefetch" href="/uapsite/assets/js/33.955cb333.js"><link rel="prefetch" href="/uapsite/assets/js/34.8c6e995b.js"><link rel="prefetch" href="/uapsite/assets/js/35.71122a89.js"><link rel="prefetch" href="/uapsite/assets/js/36.e6ba870c.js"><link rel="prefetch" href="/uapsite/assets/js/37.2c328754.js"><link rel="prefetch" href="/uapsite/assets/js/38.6c500914.js"><link rel="prefetch" href="/uapsite/assets/js/39.bb5dede2.js"><link rel="prefetch" href="/uapsite/assets/js/40.1b5dd361.js"><link rel="prefetch" href="/uapsite/assets/js/41.e908419b.js"><link rel="prefetch" href="/uapsite/assets/js/42.68ec1ded.js"><link rel="prefetch" href="/uapsite/assets/js/43.36a2d350.js"><link rel="prefetch" href="/uapsite/assets/js/44.a88c7c2b.js"><link rel="prefetch" href="/uapsite/assets/js/45.5eef8084.js"><link rel="prefetch" href="/uapsite/assets/js/46.84c24312.js"><link rel="prefetch" href="/uapsite/assets/js/47.0964a0f6.js"><link rel="prefetch" href="/uapsite/assets/js/48.02b69d10.js"><link rel="prefetch" href="/uapsite/assets/js/6.ab157167.js"><link rel="prefetch" href="/uapsite/assets/js/7.4bfbdb0f.js"><link rel="prefetch" href="/uapsite/assets/js/8.eead1267.js"><link rel="prefetch" href="/uapsite/assets/js/9.92883f8c.js"><link rel="prefetch" href="/uapsite/assets/js/vendors~flowchart.a4a5478f.js"><link rel="prefetch" href="/uapsite/assets/js/vendors~notification.7414fc30.js">
    <link rel="stylesheet" href="/uapsite/assets/css/0.styles.69760bb8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/uapsite/" class="home-link router-link-active"><img src="/uapsite/logo-head.png" alt="UAP Site" class="logo"> <span class="site-name can-hide">UAP Site</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/uapsite/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/uapsite/development/" class="nav-link">
  Development
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Learn more" class="dropdown-title"><span class="title">Learn more</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/uapsite/faq/" class="nav-link">
  FAQ
</a></li><li class="dropdown-item"><!----> <a href="/uapsite/miscellaneous/release-notes.html" class="nav-link">
  Release Notes
</a></li></ul></div></div><div class="nav-item"><a href="https://172.16.45.18/ui/page/login.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  License Apply
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/uapsite/guide/deploy.html" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/uapsite/zh/guide/deploy.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/uapsite/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/uapsite/development/" class="nav-link">
  Development
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Learn more" class="dropdown-title"><span class="title">Learn more</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/uapsite/faq/" class="nav-link">
  FAQ
</a></li><li class="dropdown-item"><!----> <a href="/uapsite/miscellaneous/release-notes.html" class="nav-link">
  Release Notes
</a></li></ul></div></div><div class="nav-item"><a href="https://172.16.45.18/ui/page/login.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  License Apply
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/uapsite/guide/deploy.html" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/uapsite/zh/guide/deploy.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <!----></nav> <div class="carbon-ads"></div> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/uapsite/guide/" class="sidebar-link">Introduction</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Deploy</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/uapsite/guide/prepare.html" class="sidebar-link">Preparation for deployment</a></li><li><a href="/uapsite/guide/deploy.html" class="active sidebar-link">Deploy</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/uapsite/guide/deploy.html#platform-basic-function-database" class="sidebar-link">Platform Basic Function Database</a></li><li class="sidebar-sub-header"><a href="/uapsite/guide/deploy.html#program" class="sidebar-link">Program</a></li></ul></li><li><a href="/uapsite/guide/run.html" class="sidebar-link">Configure and run</a></li><li><a href="/uapsite/guide/redis-sentry.html" class="sidebar-link">redis configuration</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>User Manuals</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/uapsite/guide/userManual/01-introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/uapsite/guide/userManual/02-login.html" class="sidebar-link">Login and Home</a></li><li><a href="/uapsite/guide/userManual/03-organization.html" class="sidebar-link">Organization Management</a></li><li><a href="/uapsite/guide/userManual/04-authority.html" class="sidebar-link">Rights Management</a></li><li><a href="/uapsite/guide/userManual/05-system-settings.html" class="sidebar-link">System Settings</a></li><li><a href="/uapsite/guide/userManual/06-application-settings.html" class="sidebar-link">Application Settings</a></li><li><a href="/uapsite/guide/userManual/07-my-task.html" class="sidebar-link">My Mission</a></li><li><a href="/uapsite/guide/userManual/08-workflow.html" class="sidebar-link">Workflow</a></li><li><a href="/uapsite/guide/userManual/09-timed-task.html" class="sidebar-link">Timed Task</a></li><li><a href="/uapsite/guide/userManual/10-message.html" class="sidebar-link">Message Center</a></li><li><a href="/uapsite/guide/userManual/11-monitor.html" class="sidebar-link">Monitoring</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="deploy"><a href="#deploy" class="header-anchor">#</a> Deploy</h1> <h2 id="platform-basic-function-database"><a href="#platform-basic-function-database" class="header-anchor">#</a> Platform Basic Function Database</h2> <p>Before the service starts, you need to initialize or upgrade the database. There are currently two ways:</p> <ul><li>The script is manually executed in the database. If you execute the script manually for the first time, you will also need to execute the upgrade script manually during subsequent upgrades. The database script of the unified application platform is placed in the published doc directory according to the path of &quot;package-database Vendor-version&quot;. Please select a suitable script for execution according to the current deployment.</li></ul> <img src="/uapsite/deploy/doc.png" alt="doc directory"> <div class="custom-block danger"><p class="custom-block-title">WARNING</p> <p>For the first deployment of the UAP database, the scripts of each version need to be executed in order according to the version number.
For databases that have already deployed UAP, first check the currently deployed UAP version, and then execute the scripts in subsequent upgrade versions in turn.</p></div> <ul><li>To execute the script automatically, you need to set spring.flyway.enabled: true, and the default configuration is false (see 3.2 Configuration File). If the script is executed automatically for the first time using flyway, in subsequent upgrades, please continue to execute the script using flyway. The flyway shutdown is not performed automatically by default. Once the flyway script is executed, it cannot be changed. If you want to modify the data in the future, you need to write another upgrade script. War package released by unified application platform</li></ul> <p>Database scripts are included, so you don't need to copy the scripts in the doc directory.</p> <p>Mysql: War package name \ WEB-INF \ classes \ db \ migration \ mysql <br>
Oracle: War package name \ WEB-INF \ classes \ db \ migration \ oracle \</p> <img src="/uapsite/deploy/databaseSql.png" alt="Data script directory"> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>For the oralce database, if you use oracle management tools such as pl / sql to execute the script, you must configure the local environment variables LANG and NLS_LANG according to the language used by the project before executing the script.</p></div> <h2 id="program"><a href="#program" class="header-anchor">#</a> Program</h2> <p>Starting from version 2.0.0.0, the unified application platform provides two deployment methods:</p> <ul><li>The same way as the 1.x.x.x version of each module war package deployment</li> <li>Micro service jar package deployment method</li></ul> <p>If you upgrade from 1.x.x.x to 2.0.0.0 or later, you can choose to keep the original deployment method, or you can choose to use microservices to deploy. The war package deployment method directly copies the relevant war package published by UAP to the Tomcat webapps directory. For the micro-service deployment steps, please refer to the Unified Application Platform_Micro-Service Deployment Manual.</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/13/2020, 4:23:35 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/uapsite/guide/prepare.html" class="prev">
        Preparation for deployment
      </a></span> <span class="next"><a href="/uapsite/guide/run.html">
        Configure and run
      </a>
      →
    </span></p></div> <div class="bsa-cpc-wrapper"><div class="bsa-cpc"></div></div></main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/uapsite/assets/js/app.58d761a1.js" defer></script><script src="/uapsite/assets/js/4.80270faa.js" defer></script><script src="/uapsite/assets/js/12.eabeb8a0.js" defer></script><script src="/uapsite/assets/js/5.7f8a8258.js" defer></script>
  </body>
</html>
